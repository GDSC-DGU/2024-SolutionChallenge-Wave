# 2024 Solution Challenge: üåäWave
![KakaoTalk_Image_2024-02-25-22-00-40](https://github.com/GDSC-DGU/2024-SolutionChallenge-Wave-Frontend/assets/106448279/bb36921a-0b65-40fd-bd03-02850b517d14)


# üåç UN SDGs Goals
<img width="220" alt="Ïä§ÌÅ¨Î¶∞ÏÉ∑ 2024-02-24 Ïò§ÌõÑ 10 39 46" src="https://github.com/GDSC-DGU/2024-SolutionChallenge-Wave-Frontend/assets/106448279/62c7d19b-a71f-4ea4-930d-0557d252bad4">

# What is Wave's Solution?
### ***"Wave from us save from war"***
"Wave from us, save from war" is our slogan,which is belief that small ripples can create a massive change.
Our service is dedicated to maintaining and elevating awareness of **ongoing conflicts**, addressing the challenge of **declining public interest as wars continue**.  
By offering an **Interactive War Map** that provides real-time updates and news on conflicts, alongside integrated features for **making donations**, we aim to actively engage the **global community**.  
This approach not only keeps the audience informed about the latest developments in conflict zones but also facilitates **direct support to affected areas**, ensuring that the momentum of global empathy and aid is sustained over time.  

# üõ†Ô∏èTech Stacküõ†Ô∏è
## Frameworks
![Flutter](https://img.shields.io/badge/Flutter-02569B?style=for-the-badge&logo=flutter&logoColor=white)
![Flask](https://img.shields.io/badge/flask-%23000.svg?style=for-the-badge&logo=flask&logoColor=white)
![Spring](https://img.shields.io/badge/spring-%236DB33F.svg?style=for-the-badge&logo=spring&logoColor=white)
![Spring Boot](https://img.shields.io/badge/Spring%20Boot-6DB33F?style=for-the-badge&logo=spring-boot&logoColor=white)



## Server
![Google Cloud](https://img.shields.io/badge/Google%20Cloud-4285F4?style=for-the-badge&logo=google-cloud&logoColor=white)
![Docker](https://img.shields.io/badge/docker-%230db7ed.svg?style=for-the-badge&logo=docker&logoColor=white")
![Gunicorn](https://img.shields.io/badge/gunicorn-%298729.svg?style=for-the-badge&logo=gunicorn&logoColor=white)
![Firebase](https://img.shields.io/badge/Firebase-FFCA28?style=for-the-badge&logo=firebase&logoColor=black)

## Stack
![Dart](https://img.shields.io/badge/Dart-0175C2?style=for-the-badge&logo=dart&logoColor=white)
![Python](https://img.shields.io/badge/python-3670A0?style=for-the-badge&logo=python&logoColor=ffdd54)
![JPA](https://img.shields.io/badge/JPA-6DB33F?style=for-the-badge&logo=spring-boot&logoColor=white)
![Spring Security](https://img.shields.io/badge/Spring%20Security-6DB33F?style=for-the-badge&logo=spring-security&logoColor=white)
![JSON Web Tokens](https://img.shields.io/badge/json%20web%20tokens-323330?style=for-the-badge&logo=json-web-tokens&logoColor=pink)
![Hibernate](https://img.shields.io/badge/Hibernate-59666C?style=for-the-badge&logo=hibernate&logoColor=white)
![MySQL](https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=mysql&logoColor=white)
![http](https://img.shields.io/badge/http-0.13.6-red?style=for-the-badge)
![uuid](https://img.shields.io/badge/uuid-3.0.7-blue?style=for-the-badge)

# üì≤ Execution Method
##### Here's how you can set up a testing environment.
##### Download the apk file here.
##### Run the apk file on your phone or the emulator.
##### To ensure the best experience while testing our app, we recommend testing it in a Pixel 7 Pro API 34 or higher!
### [Wave APK Link](https://github.com/GDSC-DGU/2024-SolutionChallenge-Wave/releases/tag/1.0.0) 


# üì∏ ScreenShot & Description
![WAVE README-01](https://github.com/GDSC-DGU/2024-SolutionChallenge-Wave-Frontend/assets/106448279/0f34363f-0565-49b3-88fd-66b85eb66e36)
![WAVE README-02](https://github.com/GDSC-DGU/2024-SolutionChallenge-Wave-Frontend/assets/106448279/6f3898bb-9ec7-4a4c-b563-efcd53dce1f6)
![WAVE README-03](https://github.com/GDSC-DGU/2024-SolutionChallenge-Wave-Frontend/assets/106448279/5f0aee83-a133-4361-ada7-95bcf2444a7b)
![WAVE README-04](https://github.com/GDSC-DGU/2024-SolutionChallenge-Wave-Frontend/assets/106448279/7720b397-627b-4b22-aafe-0467cc9bb69e)
![WAVE README-05](https://github.com/GDSC-DGU/2024-SolutionChallenge-Wave-Frontend/assets/106448279/4b149bc7-3cb1-4e04-b6b4-02ab84a8e638)
![WAVE README-06](https://github.com/GDSC-DGU/2024-SolutionChallenge-Wave-Frontend/assets/106448279/6b08c2d5-0cb1-4805-b25e-0c69283b99e4)
![WAVE README-07](https://github.com/GDSC-DGU/2024-SolutionChallenge-Wave-Frontend/assets/106448279/41886f19-fa95-42ed-9580-566bb0b61ef1)
![WAVE README-08](https://github.com/GDSC-DGU/2024-SolutionChallenge-Wave-Frontend/assets/106448279/cd836e46-a2d2-4633-b9ad-757f314695bc)
![WAVE README-09](https://github.com/GDSC-DGU/2024-SolutionChallenge-Wave-Frontend/assets/106448279/c11a6959-d29f-4454-8c0e-6b74ef631561)
![WAVE README-10](https://github.com/GDSC-DGU/2024-SolutionChallenge-Wave-Frontend/assets/106448279/3cc918cc-2050-4e4b-862d-0268ae6fa2df)
![WAVE README-11](https://github.com/GDSC-DGU/2024-SolutionChallenge-Wave-Frontend/assets/106448279/1afbf473-ab98-488b-8745-ded39177a4cd)
![WAVE README-12](https://github.com/GDSC-DGU/2024-SolutionChallenge-Wave-Frontend/assets/106448279/3a138094-5dd6-4adb-8042-213b40b920ec)


#  ‚ùáÔ∏è Architecture
<img width="1004" alt="Ïä§ÌÅ¨Î¶∞ÏÉ∑ 2024-02-25 Ïò§Ï†Ñ 12 07 09" src="https://github.com/GDSC-DGU/2024-SolutionChallenge-Wave-Frontend/assets/106448279/9e2f0645-c717-4cb6-bdba-f47ca77b98fe">

#  ‚ùáÔ∏è Server Deployment
### Local Setup:

#### Main Server(spring)
1. **Create `application-secret.yml` in spring**

    navigate to the `Wave-backend` folder, then proceed to the `spring` directory. Within this directory, create a file named `application-secret.yml` in '/src/main/resources'. Add the following configuration to the file:

    ```yaml
    spring:
      datasource:
        url: jdbc:mysql://{YOUR_DATABASE_URL}:3306/{YOUR_DATABASE_NAME}?serverTimezone=Asia/Seoul&characterEncoding=UTF-8
        username: {USERNAME}
        password: {PASSWORD}
        driver-class-name: com.mysql.cj.jdbc.Driver
        hikari:
          pool-name: jpa-hikari-pool
          maximum-pool-size: 15
          idleTimeout: 400
          maxLifeTime: 400
          data-source-properties:
            rewriteBatchedStatements: true

    jwt:
      secret-Key: {SECRET_KEY}
      access-token-expire-period: {ACCESS_TOKEN_EXPIRE_PERIOD}
      refresh-token-expire-period: {REFRESH_TOKEN_EXPIRE_PERIOD}
    ```

     **Important Configuration Note:**
    - Replace `{YOUR_DATABASE_URL}`, `{YOUR_DATABASE_NAME}`, `{USERNAME}`, and `{PASSWORD}` with your actual database URL, database name, username, and password, respectively.
    - For `{SECRET_KEY}`, `{ACCESS_TOKEN_EXPIRE_PERIOD}`, and `{REFRESH_TOKEN_EXPIRE_PERIOD}`, replace these placeholders with your actual JWT secret key, access token expiration time, and refresh token expiration time.


2. **Building Docker Image**
    ```
    docker build -t {USERNAME}/{SPRING_REPOSITORY_NAME} .
    ```

    Replace `USERNAME`, `REPOSITORY_NAME` with your Docker Hub username.

3. **Pushing to Docker Hub**
    ```
    docker push {USERNAME}/{SPRING_REPOSITORY_NAME}
    ```

    Again, ensure that `USERNAME`, `REPOSITORY_NAME` is replaced with your actual Docker Hub username.

#### Crawling Server(flask)

1. **Create `config.py` in flask**

   navigate to the `Wave-backend` folder, then proceed to the `flask` directory. Within this directory, create a file named `config.py`. Add the following configuration to the file:

    ```yaml
    SERVER_END_POINT = "http://{DOCKER_COMPOSE_SPRING_SERVICE_NAME}:8080/api/v1/countries/crawling-news"
    ```

   `DOCKER_COMPOSE_SPRING_SERVICE_NAME` refers to the name assigned to your Spring application service within the `Docker Compose file`.
    
3. **Building Docker Image**
    ```
    docker build -t {USERNAME}/{FLASK_REPOSITORY_NAME} .
    ```

    Replace `USERNAME`, `REPOSITORY_NAME` with your Docker Hub username.

4. **Pushing to Docker Hub**
    ```
    docker push {USERNAME}/{FLASK_REPOSITORY_NAME}
    ```

    Again, ensure that `USERNAME`, `REPOSITORY_NAME` is replaced with your actual Docker Hub username.


### Deploy Setup:

1. **Pulling Docker Images**
   
   For the Spring application:
     ```
     docker pull {USERNAME}/{SPRING_REPOSITORY_NAME}
     ```

   For the Flask application:
     ```
     docker pull {USERNAME}/{FLASK_REPOSITORY_NAME}
     ```
     
3. **Init.sql**
   
   For the application to function properly, you need to create several tables in your database. This setup is crucial for managing users, donations, countries, and other related data. Below is the `init.sql` file content that you should include in your project to initialize your database schema:

   ```sql
    -- Users Table
    CREATE TABLE `users` (
      `id` BIGINT AUTO_INCREMENT PRIMARY KEY,
      `nickname` VARCHAR(255) NOT NULL,
      `total_donation` INT DEFAULT 0,
      `total_donation_cnt` INT DEFAULT 0,
      `refresh_token` VARCHAR(255),
      `serial_id` VARCHAR(255) NOT NULL UNIQUE,
      `is_login` TINYINT(1),
      `is_light_on` TINYINT(1) DEFAULT 0,
      `role` VARCHAR(255) NOT NULL,
      `recent_amount_badge` VARCHAR(255),
      `recent_count_badge` VARCHAR(255),
      `created_at` DATETIME NOT NULL
    );
    
    -- Donation Country Table
    CREATE TABLE `donation_country` (
      `id` BIGINT AUTO_INCREMENT PRIMARY KEY,
      `country_id` BIGINT,
      `user_id` BIGINT,
      `donation` INT,
      `created_at` DATETIME NOT NULL,
      FOREIGN KEY (`country_id`) REFERENCES `country`(`id`),
      FOREIGN KEY (`user_id`) REFERENCES `users`(`id`)
    );
    
    -- Country Table
    CREATE TABLE `country` (
      `id` BIGINT NOT NULL PRIMARY KEY,
      `name` VARCHAR(255) NOT NULL,
      `korean_name` VARCHAR(255) NOT NULL,
      `category` VARCHAR(255) NOT NULL,
      `is_donate` TINYINT(1) NOT NULL,
      `total_wave` INT,
      `last_wave` INT,
      `casualties` INT,
      `views` INT DEFAULT 0,
      `main_title` VARCHAR(255) NOT NULL,
      `sub_title` VARCHAR(255) NOT NULL,
      `image_url` VARCHAR(255) NOT NULL,
      `imageProducer` VARCHAR(255) NOT NULL,
      `detail_image_url` VARCHAR(255) NOT NULL,
      `detail_image_title` VARCHAR(255) NOT NULL,
      `detail_image_producer` VARCHAR(255) NOT NULL
    );
    
    -- Country Content Table
    CREATE TABLE `country_content` (
      `id` BIGINT AUTO_INCREMENT PRIMARY KEY,
      `title` TEXT,
      `content` TEXT,
      `country_id` BIGINT,
      FOREIGN KEY (`country_id`) REFERENCES `country`(`id`)
    );
    
    -- News Table
    CREATE TABLE `news` (
      `id` BIGINT AUTO_INCREMENT PRIMARY KEY,
      `news_image` TEXT NOT NULL,
      `news_title` TEXT NOT NULL,
      `news_url` TEXT NOT NULL,
      `date` DATE NOT NULL,
      `country_id` BIGINT,
      FOREIGN KEY (`country_id`) REFERENCES `country`(`id`)
    );
    
    -- User Count Badges Table
    CREATE TABLE `user_count_badges` (
      `user_id` BIGINT,
      `count_badge` VARCHAR(255),
      PRIMARY KEY (`user_id`, `count_badge`),
      FOREIGN KEY (`user_id`) REFERENCES `users`(`id`)
    );
    
    -- User Amount Badges Table
    CREATE TABLE `user_amount_badges` (
      `user_id` BIGINT,
      `amount_badge` VARCHAR(255),
      PRIMARY KEY (`user_id`, `amount_badge`),
      FOREIGN KEY (`user_id`) REFERENCES `users`(`id`)
    );
   
5. **Docker Compose Up**
   
   Ensure your Docker Compose file is updated with the correct service names, container names, and image names.

   ```yaml
   version: '3'

   services:
     {DATABASE_SERVICE_NAME}:
       image: mysql:8.0
       container_name: {CONTAINER_NAME}
       ports:
         - "3306:3306"
       environment:
         MYSQL_DATABASE: {DATABASE_NAME}
         MYSQL_USER: {DATABASE_USERNAME}
         MYSQL_PASSWORD: {DATABASE_PASSWORD}
         MYSQL_ROOT_PASSWORD: {DATABASE_ROOT_PASSWORD}
         TZ: 'Asia/Seoul'  # Timezone setting for Korea
       volumes:
         - wave-db:/var/lib/mysql
         - ./init.sql:/docker-entrypoint-initdb.d/init.sql
       restart: always

     {FLASK_SERVICE_NAME}:
       image: {USERNAME}/{FLASK_REPOSITORY_NAME}:latest
       container_name: flaskapp
       ports:
         - "5000:5000"
       environment:
         TZ: 'Asia/Seoul'  # Timezone setting for Korea
       depends_on:
         - database
       restart: always

     {SPRING_SERVICE_NAME}:
       image: {USERNAME}/{SPRING_REPOSITORY_NAME}:latest
       container_name: springapp
       ports:
         - "8080:8080"
       environment:
         TZ: 'Asia/Seoul'  # Timezone setting for Korea
       depends_on:
         - {DATABASE_SERVICE_NAME}
       restart: always

   volumes:
     wave-db:


# ‚ùáÔ∏è Entity-Relationship Diagram
![Wave ERD](https://github.com/GDSC-DGU/2024-SolutionChallenge-Wave-Frontend/assets/106448279/88dbf205-c832-4f02-8287-9e0330dfca8f)


# Wave Developers
| NAME                                           | ROLE           | EMAIL                         |
|------------------------------------------------|----------------|-------------------------------|
| [SEUNGJUN KANG](https://github.com/jjuuuunnii) |**Leader**, **Back-End**       | kangseung1110@gmail.com       |
| [DOHYEONG LEE](https://github.com/puretension) | **Front-End**      | rlrlfhtm5@gmail.com          |
| [MINSEONG KIM](https://github.com/minseong0324)| **Front-End**      | kwan03240324@gmail.com        |
| [KYOUNGHYUN NAM](https://github.com/Oneourbefore) | **AI** | namkyounghyun1150@gmail.com   |
